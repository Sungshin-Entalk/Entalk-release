<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Chatroom - En'talk</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/chat.js"></script>
</head>
<body>
    <div id="chatroom">
        <aside id="sidebar">
            <button id="createNewRoom">New chat +</button>
            <p id="days">Previous 7 Days</p>
            <ul id="rooms">
                <li onclick="changeRoom('room1')">Room 1</li>
                <li onclick="changeRoom('room2')">Room 2</li>
            </ul>
        </aside>
        <section id="chat-area">
            <div id="messages">
                <!-- 초기 이미지와 버튼은 이 부분에 추가될 것입니다. -->
            </div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Enter your message...">
                <button id="runPython">Send</button>
            </div>
        </section>
    </div>

    <!-- new chat modal 띄우기 -->
    <div id="newChatModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="profile-section">
                <img src="../images/img_sherlockProfile.png" alt="Sherlock Holmes" class="profile-pic-big">
                <div class="profile-details">
                    <h3>Introduction</h3>
                    <p id="introduction">details</p>
                    <h3>Actor</h3>
                    <p id="actor">actor name</p>
                </div>
            </div>
        </div>
    </div>

    <script src="js/sherlockModal.js"></script>
    <script src="js/setupModal.js"></script>
    <script src="js/chat.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setupInitialContent(); // 첫 화면에 초기 내용을 설정하는 함수 호출
            document.getElementById('createNewRoom').addEventListener('click', function() {
                openModal(); // New chat 버튼 클릭 시 팝업 열기
            });
            document.getElementById('runPython').onclick = sendMessage; // 'Send' 버튼에 이벤트 연결

            // X 버튼 클릭 시 팝업 창 닫기
            const closeButton = document.querySelector('.close');
            if (closeButton) {
                closeButton.addEventListener('click', closeModal);
            }

            // URL 해시가 #chatroom일 때 초기 화면을 숨기고 채팅 화면을 보여줌
            if (window.location.hash === '#chatroom') {
                document.getElementById('main-screen').style.display = 'none';
                const chatroom = document.getElementById('chatroom');
                chatroom.style.display = 'flex';
                chatroom.classList.add('active');
            }
        });

        function startChat() {
            document.getElementById('main-screen').style.display = 'none';
            const chatroom = document.getElementById('chatroom');
            chatroom.style.display = 'flex';
            chatroom.classList.add('active'); // chatroom에 active 클래스 추가
        }

        // 팝업 창을 닫는 함수
        function closeModal() {
            const modal = document.getElementById('newChatModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // X 버튼 클릭 시 팝업 창 닫기
        const closeButton = document.querySelector('.close');
        if (closeButton) {
            closeButton.addEventListener('click', closeModal);
        }
    </script>
</body>
</html>
